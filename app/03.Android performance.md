### Android Performance

1. 项目工程以及架构的优化
- 为什么要优化？
  在自己的工作经历中，之前的做过的有两种项目，一种是接手老旧的项目，第二种是项目前期开发时间紧业务少。
  对于第一种项目，存在使用的架构(MVC)老旧、SDK过时等问题，第二种项目存在，代码质量低、项目层级混乱、业务耦合度高等问题。
  针对这两种项目，要想使其变得耦合度低、可维护性高、稳定性高、开发效率高的话，就需要进行项目工程以及代码层面优化。
- 解决方案：
  （1）项目工程目录优化，重新规划层级，使得工程目录结构清晰、层次合理。
  （2）架构优化：升级或者优化架构，从MVC->MVP->MVVM选择适合项目的架构。
  （3）模块化、组件化重构：抽取公用lib（网络库、路由库、工具类、扩展类等）作为底层支持，然后划分业务模块，每个业务模块之间互相没有
    依赖关系，单独处理一块业务。再是封装组件插件等，把一些常用或者通用的功能单独封装起来，使其能够在多个项目中随时调用。
  （4）针对代码的优化：对于业务逻辑代码，要利用更好的方案进行优化，并且要去除一些冗余代码 

2. APK大小优化
- 使用工具：Android Size Analyzer 使用该工具对APK进行分析
- 方案：
  （1）引用的图片资源优化：1.去除无效引用的图片资源 2.减小图片大小（转换图片格式、使用webp格式或者.9图）
  （2）移除不必要的so库：x86架构
  （3）shrinkResources 收缩资源。在Gradle打包APK时会自动忽略未使用的资源
  
3. APP启动优化 （先使用工具分析，再进行优化）
- 启动类型：（1）冷启动：创建APP进程 （启动优化的主要过程）
           （2）热启动：APP进程未被kill，将APP从后台切换到前台
           （3）温启动：需要重新执行onCreate到新建Activity的过程
- 方案：点击APP -> 应用创建进程、创建ActivityThread、创建Application、创建Activity、加载xml布局 -> Splash界面 ->Home界面
  （1）使用日志工具查看具体启动时间。在logcat中，搜索Displayed，有一条记录APP从启动到显示页面整个过程的时间。
  （2）使用Profiler工具监测整个应用的启动过程，记录并保存。再从工具中可以具体分析出加载过程那些方法耗时较多。
  （3）对于Application中，按需求初始三方SDK（懒加载、延时加载、或者按模块加载），对SP初始化进行优化
  （4）对于Activity中，对View层面进行优化
  
4. Activity加载优化(特别是首页)
-  （1）onCreate方法中减少耗时操作 
   （2）视图加载优化（View绘制、延时加载View）
   
5. 内存优化
- 使用工具：LeakCanary
  （1）图片占用内存大，进行代码优化
  （2）内存泄漏和内存溢出
  （3）内存抖动（频繁的创建和回收对象）
  
6. 卡顿优化
- 使用工具：Profiler 查看执行时间和调用栈

7. webView加载优化  （创建webView -> webView启动 -> 加载网页 -> 显示）
[webView加载优化实践](https://www.jianshu.com/p/74c9422dfc39)
- （1）webView的创建。创建一个webView复用池，节省创建时间，减少代码模板
- （2）提前启动webView。
- （3）预加载
- （4）资源缓存


  